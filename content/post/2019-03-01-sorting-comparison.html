---
title: Sorting Comparison
author: John Lee
date: '2019-03-08'
slug: sorting-comparison
categories:
  - coding
tags:
  - coding
subtitle: ''
---



<p>As I’m self studying algorithms and data structures with python from <a href="https://runestone.academy/runestone/static/pythonds/index.html">here</a>, I figured I could try to do some experiments with different sorting algorithms using my own implementations in R.</p>
<p>Types of sorting algorithms I will use:</p>
<ul>
<li>Bubble Sort</li>
<li>Insertion Sort</li>
<li>Selection Sort</li>
<li>Shell Sort</li>
<li>Merge Sort</li>
<li>Quick Sort</li>
</ul>
<p>I will be dealing with a vector of type <code>double</code>. It can be a collection of any real positive numbers.</p>
<pre class="r"><code>set.seed(3706)</code></pre>
<p>The following function is used as a sanity check to confirm that each function sorts the given vector as it should.</p>
<pre class="r"><code>check_works_correct &lt;- function(myFunc){
  tmp &lt;- function(myfunc) {
    x &lt;- sample(100, 50) # integers; This checks that the algorithm works as it should even with duplicates
    y &lt;- runif(50, 0, 500)
    return(identical(sort(x), myfunc(x)) &amp;&amp; identical(sort(y), myfunc(y))) # compare to R&#39;s sort function
  }
  return(all(replicate(n = 100, tmp(myFunc))))
}</code></pre>
<div id="write-sorting-algorithms" class="section level1">
<h1>Write Sorting Algorithms</h1>
<p><strong>Bubble Sort</strong></p>
<pre class="r"><code>bubble_sort &lt;- function(x) {
  pass_remain &lt;- length(x)
  swapped &lt;- TRUE
  while ((pass_remain &gt;= 1) &amp; swapped) {
    swapped &lt;- FALSE
    a &lt;- 1
    b &lt;- 2
    while (a &lt; pass_remain) {
      if (x[a] &gt; x[b]) {
        tmp &lt;- x[a]
        x[a] &lt;- x[b]
        x[b] &lt;- tmp
        swapped &lt;- TRUE
      }
      a &lt;- a + 1
      b &lt;- b + 1
    }
    pass_remain &lt;- pass_remain - 1
  }
  return(x)
}

check_works_correct(bubble_sort)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Insertion Sort</strong></p>
<pre class="r"><code>insertion_sort &lt;- function(x) {
  for (i in 2:length(x)) {
    item &lt;- x[i]
    pos &lt;- i
    while ((x[pos - 1] &gt; item) &amp;&amp; (pos &gt; 1)) {
      x[pos] &lt;- x[pos - 1]
      pos &lt;- pos - 1
    }
    x[pos] &lt;- item
  }
  return(x)
}

check_works_correct(insertion_sort)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Selection Sort</strong></p>
<pre class="r"><code>selection_sort &lt;- function(x) {
  for (i in seq(length(x), 1, -1)) {
    max_ind &lt;- 1
    for (j in 1:i) {
      if (x[j] &gt; x[max_ind]) {
        max_ind &lt;- j
      }
    }
    tmp &lt;- x[i]
    x[i] &lt;- x[max_ind]
    x[max_ind] &lt;- tmp
  }
  return(x)
}

check_works_correct(selection_sort)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Shell Sort</strong></p>
<pre class="r"><code>shell_sort &lt;- function(x) {
  # choose max increment (Hibbard Increment)
  k &lt;- floor(log(length(x)+1, 2))
  # sort all the sublists with the increment, while decreasing the increment
  while (k &gt; 0) {
    gap &lt;- 2^k - 1
    # sort each sublist with insertion sort
    for (i in 1:gap) {
      compare_pos &lt;- i + gap
      while (compare_pos &lt; (length(x) + 1)) {
        item &lt;- x[compare_pos]
        pos &lt;- compare_pos
        while (x[pos-gap] &gt; item &amp;&amp; pos &gt; i) {
          x[pos] &lt;- x[pos-gap]
          pos &lt;- pos-gap
        }
        x[pos] &lt;- item
        compare_pos &lt;- compare_pos + gap
      }
    }
    # decrement
    k &lt;- k - 1
  }
  return(x)
}

check_works_correct(shell_sort)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Merge Sort</strong></p>
<pre class="r"><code># merge sort with recursion
merge_sort &lt;- function(x) {
  if (length(x) &lt; 2) { # base case
    return(x)
  } else {
    break_point &lt;- length(x) %/% 2
    
    # break the vector into two
    left &lt;- x[1:break_point]
    right &lt;- x[(break_point+1):length(x)]
    
    # recurecurecursionsionsion
    left &lt;- merge_sort(left)
    right &lt;- merge_sort(right)
    
    insert_pos &lt;- 1
    left_pos &lt;- 1
    right_pos &lt;- 1
    
    # merge left and right
    while (left_pos &lt;= length(left) &amp;&amp; right_pos &lt;= length(right)) {
      if (left[left_pos] &lt;= right[right_pos]) {
        x[insert_pos] &lt;- left[left_pos]
        left_pos &lt;- left_pos + 1
      } else {
        x[insert_pos] &lt;- right[right_pos]
        right_pos &lt;- right_pos + 1
      }
      insert_pos &lt;- insert_pos + 1
    }
    
    if (left_pos &lt;= length(left)) {
      while (left_pos &lt;= length(left)) {
        x[insert_pos] &lt;- left[left_pos]
        left_pos &lt;- left_pos + 1
        insert_pos &lt;- insert_pos + 1
      }
    }
    
    if (right_pos &lt;= length(right)) {
      while (right_pos &lt;= length(right)) {
        x[insert_pos] &lt;- right[right_pos]
        right_pos &lt;- right_pos + 1
        insert_pos &lt;- insert_pos + 1
      }
    }
    
    return(x)
  }
}
check_works_correct(merge_sort)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Quick Sort</strong></p>
<pre class="r"><code>quick_sort &lt;- function(x) {
  low &lt;- 1
  high &lt;- length(x)
  x &lt;- quick_sort_helper(x, low, high)
  return(x)
}

quick_sort_helper &lt;- function(x, low, high) {
  if (low &gt;= high) {
    return(x)
  } else {
    # choose pivot
    mid &lt;- (low + high) %/% 2
    if ((x[low] &lt; x[mid] &amp;&amp; x[mid] &lt; x[high]) || (x[high] &lt; x[mid] &amp;&amp; x[mid] &lt; x[low])) {
      median_ind &lt;- mid
    } else if ((x[mid] &lt; x[low] &amp;&amp; x[low] &lt; x[high]) || (x[high] &lt; x[low] &amp;&amp; x[low] &lt; x[mid])) {
      median_ind &lt;- low
    } else {
      median_ind &lt;- high
    }
    
    # put pivot to last index
    pivot &lt;- x[median_ind]
    if (median_ind != high) {
      x[median_ind] &lt;- x[high]
      x[high] &lt;- pivot
    } 
    
    left &lt;- low
    right &lt;- high-1
    
    # rearrange the values around the pivot
    done &lt;- FALSE
    while (!done) {
      while (left &lt;= right &amp;&amp; x[left] &lt; pivot) {
        left &lt;- left + 1
      }
      while (right &gt;= left &amp;&amp; x[right] &gt;= pivot) {
        right &lt;- right - 1
      }
      if (left &gt; right) {
        done &lt;- TRUE
      } else {
        tmp &lt;- x[right]
        x[right] &lt;- x[left]
        x[left] &lt;- tmp
      }
    }
    x[high] &lt;- x[left]
    x[left] &lt;- pivot
    
    x &lt;- quick_sort_helper(x, low, left-1)
    x &lt;- quick_sort_helper(x, left+1, high)
  }
  return(x)
}

check_works_correct(quick_sort)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>Now I’ll compare the runtime of each sort, varying the size and shape of the graphs.</p>
</div>
<div id="generate-unordered-sequences-with-varying-trends" class="section level1">
<h1>Generate Unordered Sequences with Varying Trends</h1>
<p>I built the function <code>generate_random_sequence</code>, which accepts the following to generate a random sequence:</p>
<ul>
<li><code>trend</code>: a function that describes the general trend of the sequence of the sequences</li>
<li><code>n</code>: number of points</li>
<li><code>low</code>: lowest <code>x</code> value. Defaults to 0.</li>
<li><code>high</code>: highest <code>x</code> value. Defaults to 10.</li>
<li><code>noise</code>: a function to be used to generate noise for the sequence. Defaults to a Gaussian Distribution with mean 0 and sd 5</li>
</ul>
<pre class="r"><code>generate_random_sequence &lt;- function(trend, n, low=0, high=10, noise = function(x) rnorm(x, 0, 5)) {
  # trend: a function; general trend of the sequence
  # noise: a function; amount of noise you want to add to a sequence
  x &lt;- trend(seq(low, high, length.out = n)) + noise(n)
  if (any(x &lt;= 0)) {
    x &lt;- x + abs(min(x)) + 1
  }
  return(x)
}</code></pre>
<p>For example, suppose I want to generate a sequence of length <code>n = 100</code> that follows a quadratic trend. (I put less emphasis on the aesthetics of the graphs. I just wanted to quickly demonstrate the graphs.)</p>
<pre class="r"><code>trend1 &lt;- function(x) (x-5)^2 # quadratic trend
x1 &lt;- generate_random_sequence(trend1, 100)

par(mfrow = c(1, 2), mar = c(1, 0.1, 2, 2), oma=c(1.5,2,2,1))
plot(x1, xaxt = &#39;n&#39;, main = &#39;Scatterplot&#39;, xlab=&#39;&#39;)
barplot(x1, main = &#39;Barplot&#39;)
mtext(expression(bold(&quot;Sequence with Quadratic Trend&quot;)), outer=TRUE, cex=1.5)</code></pre>
<p><img src="/post/2019-03-01-sorting-comparison_files/figure-html/example1-1.png" width="672" /></p>
<p>Create various types of trends</p>
<pre class="r"><code>quadratic_trend &lt;- function(x) (x-5)^2
right_skew_trend &lt;- function(x) dgamma(x, 4, 2) * 10
left_skew_trend &lt;- function(x) dgamma(10-x, 4, 2) * 10
symmetrical_trend &lt;- function(x) dnorm(x, 5, 1.3) * 10
flat_trend &lt;- function(x) dunif(x, 0, 10) * 10
sine_trend &lt;- function(x) sin(x*2) * 5 

trend_list &lt;- list(
  # all range from 0 to 10
  quadratic_trend = quadratic_trend,
  right_skew_trend = right_skew_trend, 
  left_skew_trend = left_skew_trend, 
  symmetrical_trend = symmetrical_trend, 
  flat_trend = flat_trend, 
  sine_trend = sine_trend
)

par(mfrow = c(1, 2))
for (i in 1:length(trend_list)) {
  plot(trend_list[[i]], 0, 10, main = names(trend_list)[i], xaxt = &quot;n&quot;, xlab = &quot;&quot;)
}</code></pre>
<p><img src="/post/2019-03-01-sorting-comparison_files/figure-html/create_trends-1.png" width="672" /><img src="/post/2019-03-01-sorting-comparison_files/figure-html/create_trends-2.png" width="672" /><img src="/post/2019-03-01-sorting-comparison_files/figure-html/create_trends-3.png" width="672" /></p>
<p>What they look like when noise is added:</p>
<pre class="r"><code>par(mfrow = c(1,2))
barplot(generate_random_sequence(quadratic_trend, 100, noise = function(x) rnorm(x, 0, 5)), main = &quot;Quadratic Trend&quot;)
barplot(generate_random_sequence(right_skew_trend, 100, noise = function(x) rnorm(x, 0, 1)), main = &quot;Right Skew Trend&quot;)
barplot(generate_random_sequence(left_skew_trend, 100, noise = function(x) rnorm(x, 0, 1)), main = &quot;Left Skew Trend&quot;)
barplot(generate_random_sequence(symmetrical_trend, 100, noise = function(x) rnorm(x, 0, 0.7)), main = &quot;Symmetrical Trend&quot;)
barplot(generate_random_sequence(flat_trend, 100, noise = function(x) rnorm(x, 0, 0.8)), main = &quot;Flat Trend&quot;)
barplot(generate_random_sequence(sine_trend, 100, noise = function(x) rnorm(x, 0, 2)), main = &quot;Sine Trend&quot;)</code></pre>
<p><img src="/post/2019-03-01-sorting-comparison_files/figure-html/barplots_evalled-1.png" width="672" /><img src="/post/2019-03-01-sorting-comparison_files/figure-html/barplots_evalled-2.png" width="672" /><img src="/post/2019-03-01-sorting-comparison_files/figure-html/barplots_evalled-3.png" width="672" /></p>
<p>Also, consider some special cases, such as already sorted, sorted backwards, etc.</p>
<pre class="r"><code>already_sorted &lt;- function(n) seq(1, n)
sorted_backwards &lt;- function(n) seq(n, 1, -1)
one_off &lt;- function(n) {
  mySeq &lt;- seq(1, n)
  random_index &lt;- sample(mySeq, 2)
  mySeq[random_index] &lt;- mySeq[random_index[c(2,1)]]
  return(mySeq)
}
extreme_out_of_place &lt;- function(n, lowest=TRUE) {
  mySeq &lt;- seq(1,n)
  index &lt;- ifelse(lowest, 1, length(mySeq))
  replace_val &lt;- ifelse(lowest, n+1, 0)
  mySeq[index] &lt;- replace_val
  return(mySeq)
}

special_case_list &lt;- list(
  already_sorted = already_sorted,
  sorted_backwards = sorted_backwards,
  one_off = one_off,
  extreme_out_of_place_low = function(x) extreme_out_of_place(x, TRUE),
  extreme_out_of_place_high = function(x) extreme_out_of_place(x, FALSE)
)

par(mfrow = c(1,2))
for (i in 1:length(special_case_list)) {
  barplot(special_case_list[[i]](100), main = names(special_case_list)[i], cex.main = 0.9)
}</code></pre>
<p><img src="/post/2019-03-01-sorting-comparison_files/figure-html/construct_special_cases-1.png" width="672" /><img src="/post/2019-03-01-sorting-comparison_files/figure-html/construct_special_cases-2.png" width="672" /><img src="/post/2019-03-01-sorting-comparison_files/figure-html/construct_special_cases-3.png" width="672" /></p>
</div>
<div id="sorting-with-different-algorithms" class="section level1">
<h1>Sorting with Different Algorithms</h1>
<p>Now that I have the tools to construct random sequences, I can finally start generating sequences and run benchmarks.</p>
<p>For future convenience, I saved the results in two different lists: <code>trend_sort_time</code> and <code>special_case_sort_time</code>. Each list are divided by number of unsorted sequences (10, 100, 1000). And for each number are microbenchmarks for each “trends” or “special cases”.</p>
<p><code>microbenchmark</code> is used to precisely evaluate the performance of each algorithm. Each sorting algorithm sorts randomly generated data 100 times. On each iteration, sequences are randomly generated, and each algorithm sorts the same sequence.</p>
<p>Microbenchmark for trends:</p>
<pre class="r"><code>library(microbenchmark)

# each trend uses different noise scale.
noise_list &lt;- list(
  &quot;quadratic_trend&quot; = function(x) rnorm(x, 0, 5),
  &quot;right_skew_trend&quot; = function(x) rnorm(x, 0, 1),
  &quot;left_skew_trend&quot; = function(x) rnorm(x, 0, 1),
  &quot;symmetrical_trend&quot; = function(x) rnorm(x, 0, 0.7),
  &quot;flat_trend&quot; = function(x) rnorm(x, 0, 0.8),
  &quot;sine_trend&quot; = function(x) rnorm(x, 0, 2)
)

N &lt;- c(10, 100, 1000) # size of sequence

# loop through each N and trends
trend_sort_time &lt;- setNames(
  rep(list(setNames(vector(&quot;list&quot;, length(trend_list)), names(trend_list))), length(N)),
  N)
print(str(trend_sort_time))</code></pre>
<pre><code>## List of 3
##  $ 10  :List of 6
##   ..$ quadratic_trend  : NULL
##   ..$ right_skew_trend : NULL
##   ..$ left_skew_trend  : NULL
##   ..$ symmetrical_trend: NULL
##   ..$ flat_trend       : NULL
##   ..$ sine_trend       : NULL
##  $ 100 :List of 6
##   ..$ quadratic_trend  : NULL
##   ..$ right_skew_trend : NULL
##   ..$ left_skew_trend  : NULL
##   ..$ symmetrical_trend: NULL
##   ..$ flat_trend       : NULL
##   ..$ sine_trend       : NULL
##  $ 1000:List of 6
##   ..$ quadratic_trend  : NULL
##   ..$ right_skew_trend : NULL
##   ..$ left_skew_trend  : NULL
##   ..$ symmetrical_trend: NULL
##   ..$ flat_trend       : NULL
##   ..$ sine_trend       : NULL
## NULL</code></pre>
<pre class="r"><code>for (n in N) {
  for (trend in names(trend_list)) {
    trend_sort_time[[as.character(n)]][[trend]] &lt;-
      microbenchmark(
        &quot;bubble_sort&quot; = bubble_sort(Seq),
        &quot;insertion_sort&quot; = insertion_sort(Seq),
        &quot;selection_sort&quot; = selection_sort(Seq),
        &quot;shell_sort&quot; = shell_sort(Seq),
        &quot;merge_sort&quot; = merge_sort(Seq),
        &quot;quick_sort&quot; = quick_sort(Seq),
        times = 100L,
        setup = assign(&quot;Seq&quot;, 
                       generate_random_sequence(
                         trend=trend_list[[trend]],
                         n=n,noise = noise_list[[trend]]))
      )
  }
}

print(trend_sort_time)</code></pre>
<pre><code>## $`10`
## $`10`$quadratic_trend
## Unit: microseconds
##            expr    min       lq      mean   median       uq      max neval
##     bubble_sort 20.767  25.2990  36.31627  30.0185  36.8145  236.366   100
##  insertion_sort 12.839  19.6345  31.67960  22.2775  25.6760  461.026   100
##  selection_sort 53.239  67.2100 103.41226  74.5730  84.2010 1437.071   100
##      shell_sort 98.549 156.1300 237.41921 187.4690 232.9675 1122.169   100
##      merge_sort 63.056  83.2570 103.11768  94.9615 107.0445  399.858   100
##      quick_sort 42.667  56.2600  68.19913  61.1680  66.2655  282.053   100
## 
## $`10`$right_skew_trend
## Unit: microseconds
##            expr     min       lq      mean   median       uq     max neval
##     bubble_sort  24.921  31.3400  38.05688  36.2485  43.6115  63.812   100
##  insertion_sort  12.838  19.8235  33.18612  24.1655  28.3195 820.105   100
##  selection_sort  44.932  67.0210  87.94271  74.5725  87.5990 671.338   100
##      shell_sort 106.101 150.4660 186.34017 180.2950 218.4310 395.328   100
##      merge_sort  66.454  84.9560 102.38908  93.6405 107.8000 565.238   100
##      quick_sort  45.310  55.8820  65.18977  60.9800  68.1540 350.395   100
## 
## $`10`$left_skew_trend
## Unit: microseconds
##            expr    min      lq      mean   median       uq     max neval
##     bubble_sort 12.083 26.4310  30.57703  30.0180  35.6815  61.168   100
##  insertion_sort  6.797 16.2370  19.27221  18.6910  21.1450  45.310   100
##  selection_sort 56.638 67.5875  83.78943  72.4960  83.2575 692.860   100
##      shell_sort 24.543 79.6700 107.81106 110.0650 132.1540 212.955   100
##      merge_sort 52.484 86.8435 100.35005  99.4930 104.9680 331.138   100
##      quick_sort 33.983 53.6170  62.09738  59.2805  63.8120 378.713   100
## 
## $`10`$symmetrical_trend
## Unit: microseconds
##            expr    min      lq      mean   median       uq     max neval
##     bubble_sort 19.257 27.9410  36.64855  32.8500  38.1360 226.926   100
##  insertion_sort 10.950 16.2365  20.43147  19.2570  23.5995  43.422   100
##  selection_sort 46.443 62.3010  92.51150  71.9295  86.0890 658.878   100
##      shell_sort 23.788 81.9360 116.11409 112.7080 137.0620 254.112   100
##      merge_sort 57.770 81.7465  98.46214  93.2630 104.2130 607.904   100
##      quick_sort 40.024 52.1070  62.27109  58.3365  65.6995 248.448   100
## 
## $`10`$flat_trend
## Unit: microseconds
##            expr    min       lq      mean   median       uq      max neval
##     bubble_sort 17.369  27.9415  36.81464  32.2835  40.5900  169.912   100
##  insertion_sort 12.083  17.7470  22.58363  21.1450  24.7325   97.416   100
##  selection_sort 48.331  70.2305 117.29590  79.2925  90.2420 1141.048   100
##      shell_sort 31.718 105.5335 167.03822 160.2835 198.6075  550.135   100
##      merge_sort 63.811  85.1450 115.23422  98.3600 108.9325 1404.599   100
##      quick_sort 38.513  52.8620  64.24967  59.2805  66.4550  286.961   100
## 
## $`10`$sine_trend
## Unit: microseconds
##            expr    min      lq      mean   median       uq     max neval
##     bubble_sort 12.838 28.3190  38.58924  36.0600  41.1565 338.690   100
##  insertion_sort  5.665 18.3135  20.92610  20.3900  24.3545  39.646   100
##  selection_sort 35.493 64.0005  90.81619  75.7055  88.9205 484.814   100
##      shell_sort 35.116 81.7465 118.43620 109.1205 132.5315 686.819   100
##      merge_sort 41.534 80.4255 108.58510 102.1360 110.6315 523.327   100
##      quick_sort 24.543 51.9180  63.33965  59.6585  70.6085 191.056   100
## 
## 
## $`100`
## $`100`$quadratic_trend
## Unit: microseconds
##            expr      min        lq      mean   median        uq      max
##     bubble_sort  838.984 1056.4700 1725.6817 1591.312 2115.9605 5471.893
##  insertion_sort  373.805  426.2885  724.9054  671.338  986.8065 1556.386
##  selection_sort  345.109  410.0525  728.1866  646.418  905.0600 2762.377
##      shell_sort 1124.056 1683.6305 2168.9798 2189.399 2567.9240 5084.496
##      merge_sort  508.979  588.4595  985.5000  927.149 1253.7555 3641.007
##      quick_sort  268.838  326.7955  586.3826  540.506  734.3945 1334.369
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## $`100`$right_skew_trend
## Unit: microseconds
##            expr      min        lq      mean    median        uq      max
##     bubble_sort 1033.815 1198.4400 1927.4796 1836.9280 2498.0715 4080.888
##  insertion_sort  491.610  532.3880  875.3220  746.8540 1155.0180 1803.323
##  selection_sort  354.171  403.8230  696.8512  661.1440  882.7825 2021.565
##      shell_sort 1232.045 1664.5625 2261.6040 2268.6910 2701.2095 5637.273
##      merge_sort  496.519  545.0380  894.0237  785.7450 1152.1870 4262.503
##      quick_sort  285.074  311.5045  506.7132  451.5865  630.3705 1621.330
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## $`100`$left_skew_trend
## Unit: microseconds
##            expr     min       lq     mean   median       uq      max neval
##     bubble_sort 696.636 776.4940 918.1019 794.8065 838.0395 1856.185   100
##  insertion_sort 214.843 232.0235 302.2081 243.7285 261.6640  635.090   100
##  selection_sort 345.109 356.2470 454.4825 362.8550 583.3620  865.792   100
##      shell_sort 692.483 810.6650 976.7251 871.2670 970.5705 2115.960   100
##      merge_sort 490.477 500.4835 639.3081 504.2590 570.5245 4076.356   100
##      quick_sort 263.929 276.9560 372.7100 284.6965 324.3420 3186.777   100
## 
## $`100`$symmetrical_trend
## Unit: microseconds
##            expr     min       lq      mean    median        uq      max
##     bubble_sort 880.895 929.4140 1088.8814  940.7415  994.7355 3050.471
##  insertion_sort 345.864 374.7485  434.8257  389.4745  415.7160  788.010
##  selection_sort 346.997 359.0795  402.0442  367.3860  378.3355  902.040
##      shell_sort 752.518 935.4555 1084.3014 1007.7625 1086.2985 1983.052
##      merge_sort 495.763 517.2850  577.5850  527.8575  543.3380 1194.665
##      quick_sort 269.215 286.7730  326.9775  295.8345  306.2185  673.226
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## $`100`$flat_trend
## Unit: microseconds
##            expr     min        lq      mean    median        uq      max
##     bubble_sort 840.494  906.0045  943.6490  926.7710  943.0070 1754.238
##  insertion_sort 325.097  366.4425  391.3738  380.2235  395.8935 1023.243
##  selection_sort 344.731  353.6045  370.8825  357.7580  365.8755  720.046
##      shell_sort 920.541 1079.3135 1185.7195 1133.1190 1201.8385 3192.442
##      merge_sort 505.203  519.9285  555.6060  527.6690  535.7865 2900.194
##      quick_sort 271.859  284.1295  309.9788  289.6050  296.5900  666.807
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## $`100`$sine_trend
## Unit: microseconds
##            expr      min        lq      mean    median        uq      max
##     bubble_sort  903.928  927.9040 1063.4514  939.0430  978.8770 3212.075
##  insertion_sort  384.377  403.6340  457.8959  413.8285  424.4010 2646.838
##  selection_sort  341.333  348.3180  370.7541  353.0380  363.0440  719.291
##      shell_sort 1108.199 1233.7440 1384.3039 1317.1890 1398.9355 3244.547
##      merge_sort  490.099  500.1055  524.5765  503.8815  510.1115 1008.140
##      quick_sort  266.572  279.0320  301.7551  285.8285  292.8145  658.501
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## 
## $`1000`
## $`1000`$quadratic_trend
## Unit: milliseconds
##            expr       min        lq      mean    median         uq
##     bubble_sort 85.171897 88.220669 96.145413 90.703448 101.045747
##  insertion_sort 35.203313 36.410437 39.292230 37.003993  39.035562
##  selection_sort 28.236580 28.481253 30.150655 28.939635  30.091631
##      shell_sort 15.501556 16.589175 18.625503 16.998283  19.591316
##      merge_sort  6.200623  6.344292  7.003736  6.409802   7.130036
##      quick_sort  3.611177  3.768439  4.280956  3.844521   4.094291
##         max neval
##  132.950141   100
##   73.793896   100
##   47.336474   100
##   34.108330   100
##   12.376702   100
##    7.769846   100
## 
## $`1000`$right_skew_trend
## Unit: milliseconds
##            expr        min         lq       mean     median         uq
##     bubble_sort 103.553635 107.649436 118.037316 110.709912 122.946153
##  insertion_sort  49.358416  51.032418  54.807333  51.816463  55.762366
##  selection_sort  28.293595  28.590184  30.825017  28.976071  30.489224
##      shell_sort  20.283986  21.121081  23.638820  22.113929  25.620138
##      merge_sort   6.196469   6.359018   7.754633   6.512881   7.561421
##      quick_sort   3.677632   3.801856   4.423564   3.870575   4.101844
##        max neval
##  185.08075   100
##   80.85540   100
##   52.42701   100
##   37.39441   100
##   42.06583   100
##   11.13899   100
## 
## $`1000`$left_skew_trend
## Unit: milliseconds
##            expr       min        lq      mean    median        uq
##     bubble_sort 77.315587 78.754356 85.551887 79.925987 85.351248
##  insertion_sort 20.669496 21.836029 24.486095 22.362377 23.389395
##  selection_sort 28.307943 28.479931 30.266044 28.789546 29.713863
##      shell_sort 11.427465 12.364997 14.133545 12.798648 14.047117
##      merge_sort  6.289354  6.365813  6.944429  6.460586  6.900467
##      quick_sort  3.604003  3.695755  4.182415  3.747295  3.872274
##        max neval
##  143.69985   100
##   44.89013   100
##   44.69643   100
##   25.07359   100
##   13.34217   100
##   10.58848   100
## 
## $`1000`$symmetrical_trend
## Unit: milliseconds
##            expr       min        lq       mean    median         uq
##     bubble_sort 89.494058 92.834321 106.053355 96.033181 111.907030
##  insertion_sort 35.387194 36.483120  41.275719 37.742916  41.559686
##  selection_sort 28.373641 28.620390  33.298133 29.449934  33.637865
##      shell_sort 15.318051 16.401707  19.605731 17.443451  21.143925
##      merge_sort  6.144741  6.370912   7.654503  6.730934   8.131945
##      quick_sort  3.638741  3.745030   4.267582  3.825265   4.263258
##         max neval
##  237.502474   100
##   95.863458   100
##  102.400504   100
##   59.697695   100
##   16.317129   100
##    7.616548   100
## 
## $`1000`$flat_trend
## Unit: milliseconds
##            expr       min        lq      mean    median         uq
##     bubble_sort 89.756099 92.890959 99.666597 94.455084 102.016694
##  insertion_sort 34.776647 36.085906 38.382893 36.739309  37.903010
##  selection_sort 28.231672 28.453500 30.297443 28.759340  30.053685
##      shell_sort 16.079631 17.182165 18.763255 17.585987  18.868060
##      merge_sort  6.190427  6.388279  7.042422  6.474368   6.803618
##      quick_sort  3.665926  3.742009  4.104090  3.782977   3.962139
##         max neval
##  144.334938   100
##   63.828044   100
##   46.233185   100
##   53.762511   100
##   14.752814   100
##    8.728522   100
## 
## $`1000`$sine_trend
## Unit: milliseconds
##            expr       min        lq       mean    median         uq
##     bubble_sort 92.665355 95.568568 113.222047 99.936982 109.830716
##  insertion_sort 38.937580 39.775053  46.066091 40.847570  45.736856
##  selection_sort 28.326445 28.485028  31.689933 28.905086  33.006174
##      shell_sort 16.244256 16.782685  19.426090 17.394365  19.793321
##      merge_sort  6.161354  6.341649   7.585050  6.629931   8.236346
##      quick_sort  3.670835  3.755224   4.588283  3.804688   3.992155
##        max neval
##  337.86858   100
##  113.23781   100
##   59.22270   100
##   47.41124   100
##   15.02052   100
##   37.25282   100</code></pre>
<p>Microbenchmark for Special Cases</p>
<pre class="r"><code>special_case_sort_time &lt;- setNames(
  rep(list(setNames(vector(&quot;list&quot;, length(special_case_list)), names(special_case_list))), length(N)),
  N)
print(str(special_case_sort_time))</code></pre>
<pre><code>## List of 3
##  $ 10  :List of 5
##   ..$ already_sorted           : NULL
##   ..$ sorted_backwards         : NULL
##   ..$ one_off                  : NULL
##   ..$ extreme_out_of_place_low : NULL
##   ..$ extreme_out_of_place_high: NULL
##  $ 100 :List of 5
##   ..$ already_sorted           : NULL
##   ..$ sorted_backwards         : NULL
##   ..$ one_off                  : NULL
##   ..$ extreme_out_of_place_low : NULL
##   ..$ extreme_out_of_place_high: NULL
##  $ 1000:List of 5
##   ..$ already_sorted           : NULL
##   ..$ sorted_backwards         : NULL
##   ..$ one_off                  : NULL
##   ..$ extreme_out_of_place_low : NULL
##   ..$ extreme_out_of_place_high: NULL
## NULL</code></pre>
<pre class="r"><code>for (n in N) {
  for (sc in names(special_case_list)) {
    special_case_sort_time[[as.character(n)]][[sc]] &lt;-
      microbenchmark(
        &quot;bubble_sort&quot; = bubble_sort(Seq),
        &quot;insertion_sort&quot; = insertion_sort(Seq),
        &quot;selection_sort&quot; = selection_sort(Seq),
        &quot;shell_sort&quot; = shell_sort(Seq),
        &quot;merge_sort&quot; = merge_sort(Seq),
        &quot;quick_sort&quot; = quick_sort(Seq),
        times = 100L,
        setup = assign(&quot;Seq&quot;, special_case_list[[sc]](n))
      )
  }
}

print(special_case_sort_time)</code></pre>
<pre><code>## $`10`
## $`10`$already_sorted
## Unit: microseconds
##            expr    min      lq     mean  median     uq     max neval
##     bubble_sort  3.776  5.2870  6.10601  6.0420  6.420  13.971   100
##  insertion_sort  4.154  5.2870  6.05701  6.4190  6.420  10.195   100
##  selection_sort 40.402 51.1625 60.10397 53.8055 55.128 595.068   100
##      shell_sort 16.236 20.5780 21.70771 21.9000 23.033  46.443   100
##      merge_sort 57.015 60.4135 71.76354 74.7620 77.405  90.242   100
##      quick_sort 36.626 41.7240 48.28944 50.0295 51.918  73.629   100
## 
## $`10`$sorted_backwards
## Unit: microseconds
##            expr    min      lq      mean  median       uq     max neval
##     bubble_sort 18.502 31.5285  60.75700 50.4080  82.3130 290.360   100
##  insertion_sort 16.614 28.1305  48.08180 38.7025  67.2100 115.163   100
##  selection_sort 27.564 37.0035  70.31368 58.7140  95.1510 208.047   100
##      shell_sort 18.502 25.2980  45.73312 41.5345  60.4140 119.694   100
##      merge_sort 41.912 63.0565 112.86338 89.4870 160.4725 254.112   100
##      quick_sort 25.676 49.8410  79.66634 69.6640 111.7645 146.124   100
## 
## $`10`$one_off
## Unit: microseconds
##            expr    min      lq      mean  median       uq     max neval
##     bubble_sort  9.440 15.4810  29.01764 23.2215  37.1925  89.865   100
##  insertion_sort  6.042 10.3835  18.26798 14.5375  23.5995  52.484   100
##  selection_sort 37.381 60.0360  99.09289 84.2010 132.9090 356.059   100
##      shell_sort 17.370 26.4310  46.16729 33.4165  66.8320 112.898   100
##      merge_sort 50.596 78.9150 123.14104 91.7525 167.2685 236.744   100
##      quick_sort 34.361 51.7290  81.67512 64.7560 110.6320 294.891   100
## 
## $`10`$extreme_out_of_place_low
## Unit: microseconds
##            expr    min      lq      mean   median       uq     max neval
##     bubble_sort 11.328 16.0475  27.71876  27.7530  37.5695  46.065   100
##  insertion_sort 10.573 12.6495  23.27086  23.2220  32.4730  45.310   100
##  selection_sort 53.617 67.3990 107.75463 109.1215 137.2515 458.761   100
##      shell_sort 28.319 33.7940  60.10386  63.0565  82.8800 106.479   100
##      merge_sort 77.405 84.7680 142.12575 147.0680 191.8120 250.714   100
##      quick_sort 47.198 60.4135  97.48062 103.2685 126.3015 159.717   100
## 
## $`10`$extreme_out_of_place_high
## Unit: microseconds
##            expr    min      lq      mean  median       uq     max neval
##     bubble_sort 23.411 25.8645  44.13606 32.2840  55.5050 215.977   100
##  insertion_sort 10.195 12.2725  19.98971 14.7260  27.3755  42.290   100
##  selection_sort 52.484 59.2810 105.20211 81.1805 127.6230 956.412   100
##      shell_sort 27.942 31.7180  50.91364 39.4575  66.8320 127.623   100
##      merge_sort 75.895 81.1810 123.85466 98.1720 163.6820 308.107   100
##      quick_sort 44.555 48.1425  73.11908 60.4140  97.9830 147.257   100
## 
## 
## $`100`
## $`100`$already_sorted
## Unit: microseconds
##            expr     min        lq       mean   median        uq      max
##     bubble_sort  23.411   32.8500   50.97780   37.192   64.7555  139.328
##  insertion_sort  30.207   43.4220   77.68789   66.266   95.5290  461.027
##  selection_sort 854.843  981.5220 1557.18525 1252.624 1889.9815 4879.100
##      shell_sort 283.941  377.3925  589.67215  453.286  799.5280 1515.987
##      merge_sort 809.533 1059.1150 1663.88199 1619.444 2125.9690 4026.900
##      quick_sort 448.189  552.2125  777.09956  599.599 1018.1470 1757.639
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## $`100`$sorted_backwards
## Unit: microseconds
##            expr      min        lq      mean    median        uq      max
##     bubble_sort 2404.057 2684.6000 3177.0520 2715.3725 3143.9270 8099.863
##  insertion_sort 1406.111 1868.2705 2172.0226 1886.0165 2020.2465 5606.697
##  selection_sort  546.738  816.1415  974.6385  830.4895  906.1945 2103.881
##      shell_sort  371.162  578.4545  646.3244  589.7815  618.2890 1430.277
##      merge_sort  834.076 1029.4750 1283.2352 1042.6895 1162.3825 6476.643
##      quick_sort  518.419  682.1005  804.8253  695.6935  747.9880 1949.828
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## $`100`$one_off
## Unit: microseconds
##            expr     min       lq       mean    median        uq      max
##     bubble_sort  54.750  328.496  743.57793  724.3895 1108.9550 2237.545
##  insertion_sort  41.535   54.184   70.54023   64.5670   82.8795  188.036
##  selection_sort 731.374  889.581  949.40847  922.0525  957.7345 2088.777
##      shell_sort 308.106  380.602  418.54503  392.1180  421.0030  952.259
##      merge_sort 987.752 1019.091 1148.77875 1038.1590 1063.0795 3952.894
##      quick_sort 511.245  530.502  551.73288  540.3185  548.2480 1139.539
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## $`100`$extreme_out_of_place_low
## Unit: microseconds
##            expr      min       lq       mean    median        uq      max
##     bubble_sort   65.322   84.201   90.88802   85.7110   87.5990  252.980
##  insertion_sort   77.405   80.048   85.32249   81.3695   82.6905  188.413
##  selection_sort  739.304  748.554  784.28496  758.1830  771.9650 2287.763
##      shell_sort  333.027  418.738  464.39100  423.4575  428.3660 3146.759
##      merge_sort 1020.979 1032.872 1145.76942 1042.8785 1061.0025 8239.946
##      quick_sort  885.050  896.000  946.70125  903.3625  913.7460 2836.010
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## $`100`$extreme_out_of_place_high
## Unit: microseconds
##            expr      min        lq       mean    median        uq      max
##     bubble_sort 1353.250 1357.9695 1407.46686 1365.1440 1378.3590 3295.148
##  insertion_sort   74.006   77.7820   86.66292   79.4815   81.5580  228.815
##  selection_sort  919.032  948.1060 1010.75411  965.4750  982.4660 3550.393
##      shell_sort  412.696  426.4785  452.85963  433.8410  439.8820 1051.186
##      merge_sort  991.905 1019.2800 1097.88842 1028.7195 1053.0735 3544.351
##      quick_sort  861.263  877.8760  916.67222  886.7485  899.2095 1701.379
##  neval
##    100
##    100
##    100
##    100
##    100
##    100
## 
## 
## $`1000`
## $`1000`$already_sorted
## Unit: microseconds
##            expr       min         lq       mean     median         uq
##     bubble_sort   209.558   273.7470   277.5791   277.1450   280.5430
##  insertion_sort   352.661   370.9735   384.5326   374.7495   379.2805
##  selection_sort 81462.673 86252.4740 89667.8729 88998.9960 92365.1290
##      shell_sort  5448.114  5625.5765  5973.6001  5719.5940  5852.3140
##      merge_sort 11585.311 12273.4520 12833.2345 12437.5110 12828.8730
##      quick_sort  4917.990  5311.8070  5444.0885  5390.1545  5450.0010
##         max neval
##     480.660   100
##    1306.430   100
##  139830.617   100
##   12002.915   100
##   15026.205   100
##    7008.278   100
## 
## $`1000`$sorted_backwards
## Unit: milliseconds
##            expr       min        lq      mean    median        uq
##     bubble_sort 203.46997 275.75233 285.93387 279.07391 285.73519
##  insertion_sort 141.54408 180.45529 189.22861 182.61127 187.33368
##  selection_sort  53.70784  73.65430  79.49624  76.30511  80.79908
##      shell_sort  18.57697  19.04215  21.03797  19.36385  20.19698
##      merge_sort  11.41011  12.57892  13.61230  12.81792  13.44452
##      quick_sort  18.39989  29.83964  32.17903  30.20023  31.19893
##        max neval
##  422.26745   100
##  331.36035   100
##  170.69898   100
##   79.34029   100
##   25.23788   100
##   77.05064   100
## 
## $`1000`$one_off
## Unit: microseconds
##            expr       min         lq       mean     median        uq
##     bubble_sort   512.755 40086.8060 67955.6121 72358.6345 98823.837
##  insertion_sort   332.650   467.0675   619.9731   577.1325   745.723
##  selection_sort 72218.363 80233.0815 86540.8283 85689.6895 90279.939
##      shell_sort  4800.941  5825.8830  6454.1359  6040.5375  6415.476
##      merge_sort 10253.206 12481.8770 13523.6862 12925.1565 14445.485
##      quick_sort  3265.320  5381.4705  5760.6824  5545.9070  5917.069
##         max neval
##  142075.713   100
##    1463.504   100
##  143626.815   100
##   12701.440   100
##   21870.989   100
##   10680.627   100
## 
## $`1000`$extreme_out_of_place_low
## Unit: microseconds
##            expr       min        lq       mean     median         uq
##     bubble_sort   510.113   794.430   817.8141   800.0945   809.9115
##  insertion_sort   615.835   765.923   801.9103   774.0410   788.7670
##  selection_sort 62900.425 64996.943 67020.3220 65644.1155 68321.7300
##      shell_sort  3704.446  6163.440  6423.6387  6284.4545  6464.3725
##      merge_sort  9418.753 12726.172 13580.9615 12924.4015 13719.0195
##      quick_sort 46938.953 54146.404 55776.9862 54790.3680 56747.9350
##        max neval
##   1571.869   100
##   1522.028   100
##  85052.333   100
##   9413.466   100
##  30417.907   100
##  66764.209   100
## 
## $`1000`$extreme_out_of_place_high
## Unit: microseconds
##            expr        min         lq        mean      median          uq
##     bubble_sort 113605.368 130409.788 136763.2121 132392.2760 137031.0455
##  insertion_sort    481.794    732.507    802.1634    738.7375    761.2035
##  selection_sort  71847.202  88375.233  95142.5751  91486.8755  95298.1765
##      shell_sort   5885.729   6230.649   7025.2381   6322.5905   6718.1070
##      merge_sort  11383.683  12382.573  13571.4011  12735.9885  14015.0435
##      quick_sort  52928.894  54232.303  57522.8404  54889.1050  59065.5255
##         max neval
##  196261.574   100
##    1778.028   100
##  165065.851   100
##   16877.483   100
##   26817.674   100
##  102699.703   100</code></pre>
<p>It’s not easy to detect any obvious trend with only numbers, so in the next post, I’ll try to find ways to visualize these results to make differences more apparent.</p>
</div>
